# =====================================================
# AGENTBAR FUNNEL PLATFORM - ENVIRONMENT CONFIGURATION
# =====================================================

# Naming Convention:
# - STAGING: funnelstaging.agentbar.ai
# - PRODUCTION: funnel.agentbar.ai
# - ADMIN STAGING: admin.funnelstaging.agentbar.ai
# - ADMIN PRODUCTION: admin.funnel.agentbar.ai

# =====================================================
# DATABASE CONFIGURATION
# =====================================================

# Staging Database
DB_STAGING_HOST=your-staging-db.supabase.co
DB_STAGING_PORT=5432
DB_STAGING_NAME=agentbar_funnel_staging
DB_STAGING_USER=postgres
DB_STAGING_PASSWORD=your-staging-db-password

# Production Database
DB_PROD_HOST=your-prod-db.supabase.co
DB_PROD_PORT=5432
DB_PROD_NAME=agentbar_funnel_prod
DB_PROD_USER=postgres
DB_PROD_PASSWORD=your-prod-db-password

# =====================================================
# MIDTRANS CONFIGURATION
# =====================================================

# Staging (Sandbox)
MIDTRANS_STAGING_ENV=sandbox
MIDTRANS_STAGING_SERVER_KEY=SB-Mid-server-XXXXX
MIDTRANS_STAGING_CLIENT_KEY=SB-Mid-client-XXXXX

# Production
MIDTRANS_PROD_ENV=production
MIDTRANS_PROD_SERVER_KEY=Mid-server-XXXXX
MIDTRANS_PROD_CLIENT_KEY=Mid-client-XXXXX

# =====================================================
# EMAIL CONFIGURATION
# =====================================================

# Staging (Test mode - internal only)
EMAIL_STAGING_HOST=smtp.gmail.com
EMAIL_STAGING_PORT=587
EMAIL_STAGING_USER=your-test@gmail.com
EMAIL_STAGING_PASS=your-app-password
EMAIL_STAGING_FROM=staging@agentbar.ai
EMAIL_STAGING_REPLY_TO=no-reply@agentbar.ai

# Production (Real customer emails)
EMAIL_PROD_HOST=smtp.gmail.com
EMAIL_PROD_PORT=587
EMAIL_PROD_USER=hello@agentbar.ai
EMAIL_PROD_PASS=your-app-password
EMAIL_PROD_FROM=info@agentbar.ai
EMAIL_PROD_REPLY_TO=no-reply@agentbar.ai

# Tenant-specific emails (stored in DB)
# BuatFilm: buatfilm@agentbar.ai, buatfilm-support@agentbar.ai
# All forward to: hello@agentbar.ai

# =====================================================
# WHATSAPP CONFIGURATION
# =====================================================

# Staging (Test number)
WA_STAGING_API_URL=http://localhost:3000
WA_STAGING_API_TOKEN=test-token-staging
WA_STAGING_SENDER=6281234567890

# Production (Real number)
WA_PROD_API_URL=https://wa.agentbar.ai
WA_PROD_API_TOKEN=prod-token-secure
WA_PROD_SENDER=6281234567890

# =====================================================
# PLATFORM DOMAINS
# =====================================================

PLATFORM_STAGING_URL=https://funnelstaging.agentbar.ai
PLATFORM_PROD_URL=https://funnel.agentbar.ai

ADMIN_STAGING_URL=https://admin.funnelstaging.agentbar.ai
ADMIN_PROD_URL=https://admin.funnel.agentbar.ai

# =====================================================
# PILOT TENANT (BuatFilm)
# =====================================================

BUATFILM_STAGING_URL=https://buatfilm-staging.agentbar.ai
BUATFILM_PROD_URL=https://buatfilm.agentbar.ai

# BuatFilm Tenant Config (stored in DB)
# These will be migrated to tenant_settings table
BUATFILM_TENANT_SLUG=buatfilm
BUATFILM_PLAN=pilot
BUATFILM_MIDTRANS_MERCHANT_ID=buatfilm-merchant

# =====================================================
# APPLICATION CONFIG
# =====================================================

# Environment
NODE_ENV=production

# API Ports
API_PORT=3002
ADMIN_PORT=3004
API_STAGING_PORT=3003
ADMIN_STAGING_PORT=3005

# JWT Secrets
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRY=7d

# Session
SESSION_SECRET=your-super-secret-session-key
SESSION_MAX_AGE=86400000

# =====================================================
# SECURITY
# =====================================================

# CORS Allowed Origins
CORS_ORIGINS=https://funnel.agentbar.ai,https://funnelstaging.agentbar.ai,https://buatfilm.agentbar.ai,https://admin.funnel.agentbar.ai,https://admin.funnelstaging.agentbar.ai

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =====================================================
# MONITORING & LOGGING
# =====================================================

# Log Level
LOG_LEVEL=info

# Sentry (Error tracking - optional)
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=production

# PM2 Monitoring (optional)
PM2_PUBLIC_KEY=your-pm2-public-key
PM2_SECRET_KEY=your-pm2-secret-key

# =====================================================
# FEATURE FLAGS
# =====================================================

FEATURE_MULTI_TENANT=true
FEATURE_CUSTOM_DOMAIN=false
FEATURE_ANALYTICS=true
FEATURE_BILLING=true
FEATURE_AUTO_BACKUP=true

# =====================================================
# BACKUP CONFIGURATION
# =====================================================

# Automated backups
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM

# =====================================================
# NOTIFICATION SETTINGS
# =====================================================

# Quiet hours (no notifications sent)
QUIET_HOURS_START=22:00
QUIET_HOURS_END=07:00

# Reminder intervals (minutes)
REMINDER_1_DELAY=60
REMINDER_2_DELAY=360
REMINDER_3_DELAY=1320

# =====================================================
# WEBHOOK CONFIGURATION
# =====================================================

# Webhook timeout
WEBHOOK_TIMEOUT_MS=5000

# Webhook retry
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY_MS=60000

# Midtrans webhook endpoints
WEBHOOK_STAGING_URL=https://funnelstaging.agentbar.ai/webhooks/midtrans
WEBHOOK_PROD_URL=https://buatfilm.agentbar.ai/webhooks/midtrans

# =====================================================
# TENANT SETTINGS (Default)
# =====================================================

# Default tenant limits
DEFAULT_MAX_ORDERS_PER_MONTH=100
DEFAULT_MAX_ADMIN_USERS=1
DEFAULT_MAX_PRODUCTS=10

# Payment expiry
DEFAULT_PAYMENT_EXPIRY_HOURS=24

# =====================================================
# DEVELOPMENT / DEBUG
# =====================================================

# Enable debug mode (DON'T ENABLE IN PRODUCTION!)
DEBUG=false
VERBOSE_LOGGING=false

# Mock payment (for testing)
MOCK_PAYMENT=false
